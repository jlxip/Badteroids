* Badteroids: Documento de Diseño
** Conceptos
*** Introducción
Badteroids es un juego competitivo en 2D para Linux. Tras un enfrentamiento entre dos naciones de Andrómeda, la Federación Galáctica y la Ciudadela, la segunda se propone destruir la galaxia, y la primera deberá de impedirlo, cada una en un aeronave de su Estado, lado a lado.
*** /Background/
Badteroids se propone como el juego a desarrollar para la asignatura Programación Lúdica de la carrera de Ingeniería Informática de la UGR. Por la imposibilidad de dedicarle mucho tiempo, se intentarán mantener unos objetivos lo más modestos posibles pero llevándolos bien a cabo.

Además, escrito en C++ y OpenGL, usando metodología de diseño orientado a datos, Badteroids es una /oda al bajo nivel/, y esto se puede apreciar en todo momento en el juego.
*** Descripción
El punto del juego es competir localmente. Por esto, la idea más importante, y la que se tendrá en mente para cada decisión, será que un videojuego de este tipo es más divertido cuando las acciones de un jugador repercuten sobre el otro, en lugar de considerar un sistema de puntuación aislado. Será, además, crítico evitar la monotonía interna (durante las partidas), así como la externa (de partida en partida).
*** Características clave
- *PVP*: los jugadores combaten el uno contra el otro con tal de frenar su progreso o debilitarlos.
- *PVE*: los jugadores se abastecen de los recursos necesarios para avanzar y se defienden de ataques de un entorno inhóspito.
- *Niveles* generados proceduralmente para mantener cada partida única.
- *Partidas cortas* para no prolongar la tensión más tiempo del necesario.
*** Género
Badteroids sigue los géneros /arcade en 2D/, /casual/, /retro/, y /acción/. Además, con respecto al gameplay, es /multijugador local/ de /pantalla dividida/.
*** Plataforma
La plataforma objetivo es GNU/Linux. Existirá la posibilidad de fabricar binarios independientes de la arquitectura solo si no se requiere complicar el código para ello, pero GNU/Linux es la plataforma principal.
*** Arte conceptual
[[./imgs/main_idea.png]]
** Gameplay y mecánicas
*** Núcleo del gameplay
La idea detrás del gameplay es modesta: en pantalla dividida, los jugadores avanzan e intentan evitar el avance de su oponente.
**** Movimiento
Uno de los intereses de Badteroids se encuentra en que los sucesos ocurren en el espacio. Por lo tanto, no hay presencia de atmósfera, sino vacío. Así, todo movimiento no es frenado por el rozamiento del aire, sino que el momento lineal se conserva. Cada pulsación de tecla conlleva un incremento de velocidad en un eje a costa de una disminución del recurso que se expulsa para conseguir dicho movimiento. Aplica, entonces, la primera ley de Newton: para frenar, es necesario crear un empuje (/thrust/) en el sentido opuesto.

El jugador deberá tener cuidado con no pasar los límites de la pantalla y frenar antes. En otro caso, perderá la partida.

Con tal de mantener la atención del jugador, la nave no puede mantenerse en reposo (relativo a la pantalla). Siempre toma lugar un pequeño movimiento incorregible. Comienza siendo uno pequeño hacia arriba a la derecha, en el caso de la nave de la izquierda, y hacia arriba a la izquierda en el caso de la de la derecha. Además, cada vez que el jugador efectúa un movimiento, se produce una desviación aleatoria de hasta el ±5%.
**** Combate
La nave tiene diversas armas. La más simple es el arma láser, que realiza un disparo desde proa. Aplica la tercera ley de Newton: al disparar, la nave sufre un empuje hacia popa.

Un jugador deberá debilitar al oponente con tal de frenar su avance. De no preocuparse por ello, el otro jugador ganará por tiempo. En caso de ambos no combatir, gana la Ciudadela.

La gran mayoría del combate se llevará a cabo *de forma indirecta*, mediante el envío de amenazas, esquivables o no, al otro jugador.
**** Avance
Con tal del avanzar, los jugadores deberán:

- Esquivar los ataques del otro jugador.
- Intentar defenderse, mediante escudos o similares, de aquellos ataques que no sean esquivables.
- Esquivar o destruir los asteroides del entorno.
- Repostar los recursos necesarios para mantener la nave en marcha.
*** Flujo de la partida
El flujo es por naturaleza lineal: ambos intentan avanzar en un camino fijo hacia el agujero negro que sostiene la galaxia. Durante el proceso, encontrarán de forma consistente:

- Asteroides de distintos tamaños que deberán de esquivar o destruir.
- Pequeños asteroides que contienen recursos, que podrán capturar y así repostar.

Conforme avance la carrera y los jugadores se aproximen al centro, irá cambiando el escenario. Esto evitará mantener un gameplay idéntico. Durante las distintas fases:

- Irán cambiando los colores del entorno.
- Aparecerán amenazas diferentes. Por ejemplo, mientras se cruza el /cinturón de asteroides/ habrá más de estos de un tamaño más reducido.
- Habrá ligeras alteraciones en el PVP. Por ejemplo, ataques que solo existen durante cierta parte de la carrera.

Estos cambios durante el gameplay le dan un ligero toque de estrategia al juego. Podrá ser conveniente realizar ciertas acciones en ciertos momentos de la partida. Por ejemplo, más cerca del agujero negro algunos ataques costarán menos recursos por poder aprovecharse de la aceleración gravitatoria de este.
*** Naciones
**** Federación Galáctica
La Federación Galáctica es una dictadura autárquica. Sus aeronaves, así, tienen un estilo serio, y se enfocan a ofrecer la máxima velocidad de movimiento para esquivar asteroides y espacio para armas. /Nada imprescindible a bordo/ es su principal preocupación. Por esto, tienen depósitos más pequeños para recursos, necesitan repostar más a menudo, y sus maniobras defensivas tienen poca duración.
**** La Ciudadela
Tras la formación de la Federación, individuos contrarios al régimen, libertarios por naturaleza, fueron marcados como /personas no gratas/. Se exiliaron y formaron /La Ciudadela/, que sigue recibiendo nuevos miembros de forma constante. Sus aeronaves tienen un estilo más /duct tape/, enfocadas en /mantenerse de una pieza/. Esto lo consiguen con mejores defensas y mayores tanques de recursos. A cambio, sacrifican impresionantes maniobras ofensivas y velocidad de movimiento.
*** Recursos
En su viaje, las aeronaves encuentran pequeños asteroides que son capaces de atrapar y de las cuales extraer recursos. No es un proceso instantáneo: está a criterio del jugador durante cuánto tiempo quiere mantener agarrado el objeto para la extracción. Puede decidir mantenerlo hasta rellenar su depósito (o exhaustar el asteroide), o bien soltarlo después de unos segundos con tal de cargar menos peso y volver a la velocidad de movimiento usual.
**** Hidrógeno
El hidrógeno hace de combustible en Badteroids. Quedarse sin él implicaría cesar de acelerar y perder así la partida. Se utiliza, además, para cargar armas y escudos en el breve instante durante el que estén disponibles.
**** Oxígeno
Todo ser vivo, y esto incluye los seres de Andrómeda, necesita oxígeno para mantener una atmósfera en la cual sobrevivir. No siendo esto bastante, es además necesario en pequeñas cantidades como catalizador en las combustiones de hidrógeno. Quedarse sin oxígeno conllevaría la muerte inmediata del comandante.
*** Fases de la carrera
(Pendiente de definir)
** Interfaz y gráficos
*** Menús
Badteroids tiene tres pantallas de menú: la principal, la de ajustes, y la de pausa.
**** Menú principal
Se muestra al iniciar el juego. Su fondo es el usual de Badteroids, salvo que es estático. Contiene el título del videojuego, y tres opciones:
- /PLAY/, para comenzar una nueva partida.
- /SETTINGS/, abre el menú de ajustes.
- /EXIT/, para salir.

**** Menú de ajustes
Al entrar en /SETTINGS/ dentro del menú principal, aparecen opciones de ajustes del juego, bajo el rótulo /SETTINGS/, y sobre un botón /BACK/ para volver. Los cambios deberán guardarse automáticamente al modificarse, y permanecer al reiniciar el juego.

- /VSync/Flex mode/, selecciona entre dos modos de dibujado de frames: VSync, es decir, una vez entre refresco de pantallas, lo que evita el tearing, y /Flex mode/, es decir, sin límite de FPS, para poder medir los valores que alcanza el juego. Por defecto, se usa VSync.
- /MSAA/, selecciona el nivel de Multi-Sample Anti-Aliasing a usar. Los valores posibles son: 0, 2, 4, 8, 16, y 32. Por defecto, se usa MSAAx16.
- /FPS off/on/, permite elegir entre mostrar los FPS en la esquina superior izquierda de la pantalla u ocultarlos. Por defecto, no se muestran.

**** Menú de pausa
Durante una partida, pulsar cualquiera de las teclas CTRL pausa el juego. Se permite de esta manera para que ambos jugadores puedan pausar en todo momento. En este menú, bajo el rótulo /PAUSE/, se muestran dos opciones:
- /RESUME/, para continuar el juego. Pulsar de nuevo CTRL tiene la misma acción. De seleccionarse esta opción, aparece una cuenta atrás de 3 segundos, y se reanuda la partida.
- /EXIT/, para abandonar la partida y volver al menú principal.

*** El fondo
En la partida, en todo momento hay un fondo estelado, cargado de una textura generada aleatoriamente en el momento. Se genera proceduramente, lo que no limita la resolución a la que se debe jugar.

Además, el fondo está en todo momento en movimiento para dar la sensación de velocidad. Al principio, el movimiento es lento. Cuando se acerca el final del juego, la atracción gravitatoria del agujero negro es mayor, lo que provoca una fuerza (aceleración) mayor, y el movimiento del fondo es mayor.
** Generación de mundo
(Pendiente de definir)
** Mercado
Badteroids está bajo la licencia de /izquierdos de autor/ GNU General Public License v3, y su distribución se llevará a cabo en este mismo repositorio de GitHub de forma gratuita, sin modo oficial de pagar por él.
** Historial de cambios
*** Versión 0.6
- En "Conceptos -> Background", párrafo sobre "oda al bajo nivel".
- En "Interfaz y gráficos -> Menús", "Menú de pausa".
*** Versión 0.5
- En "Interfaz y gráficos", sección sobre los menús.
*** Versión 0.4
- En "Gameplay y mecánicas", especificación del arma láser.
*** Versión 0.3
- Comenzado "Interfaz y gráficos" con "El fondo"
*** Versión 0.2.1
- Cambiada la desviación aleatoria de movimiento de +5% a ±5%.
*** Versión 0.2
- Añadida mecánica de movimiento inercial y con desviación aleatoria.
*** Versión 0.1
- Primera redacción del documento.
